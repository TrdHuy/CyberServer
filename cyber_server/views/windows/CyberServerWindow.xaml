<Window x:Class="cyber_server.views.windows.CyberServerWindow"
		x:Name="PART_MainWindow"
		xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
		xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
		xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
		xmlns:pvivm="clr-namespace:cyber_server.view_models.plugin_version_item"
		mc:Ignorable="d"
		Title="MainWindow"
		Height="480"
		Width="800">

	<Window.Resources>
		<Style TargetType="{x:Type TextBox}"
			   x:Key="{x:Type TextBox}">
			<Setter Property="VerticalContentAlignment"
					Value="Center" />
			<Setter Property="Margin"
					Value="0,5" />
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="{x:Type TextBox}">
						<Grid>
							<Rectangle x:Name="BackgroundRec"
									   RadiusX="2"
									   RadiusY="2"
									   Fill="{TemplateBinding Background}"
									   StrokeThickness="0" />

							<ScrollViewer Margin="5,0,0,0"
										  VerticalContentAlignment="Center"
										  VerticalAlignment="Center"
										  VerticalScrollBarVisibility="Disabled"
										  HorizontalScrollBarVisibility="Disabled"
										  x:Name="PART_ContentHost" />

							<TextBlock x:Name="TagTextBox"
									   Margin="7,0,0,0"
									   Text="{TemplateBinding Tag}"
									   Background="Transparent"
									   VerticalAlignment="Center"
									   IsHitTestVisible="False"
									   Foreground="Gray"
									   FontSize="{TemplateBinding FontSize}">
								<TextBlock.Style>
									<Style TargetType="{x:Type TextBlock}">
										<Setter Property="Visibility"
												Value="Collapsed" />
										<Style.Triggers>
											<DataTrigger Binding="{Binding Text, RelativeSource={RelativeSource TemplatedParent}}"
														 Value="">
												<Setter Property="Visibility"
														Value="Visible" />
											</DataTrigger>
										</Style.Triggers>
									</Style>
								</TextBlock.Style>
							</TextBlock>
						</Grid>


					</ControlTemplate>

				</Setter.Value>
			</Setter>
		</Style>

	</Window.Resources>
	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition />
			<RowDefinition Height="30" />
		</Grid.RowDefinitions>
		<TabControl>
			<TabItem Header="Quản lý plugin">
				<Grid>
					<Grid.RowDefinitions>
						<RowDefinition Height="300" />
						<RowDefinition />
					</Grid.RowDefinitions>
					<ListView x:Name="PART_PluginLV">
						<ListView.View>
							<GridView>
								<GridViewColumn DisplayMemberBinding="{Binding Name}">
									<GridViewColumnHeader Content="Tên" />
								</GridViewColumn>
								<GridViewColumn DisplayMemberBinding="{Binding Author}">
									<GridViewColumnHeader Content="Tác giả" />
								</GridViewColumn>
								<GridViewColumn DisplayMemberBinding="{Binding Description}">
									<GridViewColumnHeader Content="Mô tả" />
								</GridViewColumn>
								<GridViewColumn DisplayMemberBinding="{Binding Downloads}">
									<GridViewColumnHeader Content="Lượt download" />
								</GridViewColumn>
								<GridViewColumn DisplayMemberBinding="{Binding Rates}">
									<GridViewColumnHeader Content="Đánh giá" />
								</GridViewColumn>
								<GridViewColumn>
									<GridViewColumnHeader Content="Lịch sử phiên bản" />
									<GridViewColumn.CellTemplate>
										<DataTemplate>
											<ListView ItemsSource="{Binding VersionSource}">
												<ListView.View>
													<GridView>
														<GridViewColumn DisplayMemberBinding="{Binding Version}">
															<GridViewColumnHeader Content="Phiên bản" />
														</GridViewColumn>
														<GridViewColumn DisplayMemberBinding="{Binding Description}">
															<GridViewColumnHeader Content="Mô tả" />
														</GridViewColumn>
														<GridViewColumn DisplayMemberBinding="{Binding FilePath}">
															<GridViewColumnHeader Content="Đường dẫn" />
														</GridViewColumn>
													</GridView>
												</ListView.View>
											</ListView>
										</DataTemplate>
									</GridViewColumn.CellTemplate>
								</GridViewColumn>
							</GridView>
						</ListView.View>
					</ListView>
				</Grid>
			</TabItem>
			<TabItem Header="Thêm plugin">
				<ScrollViewer>
					<Grid>
						<Grid.RowDefinitions>
							<RowDefinition Height="auto" />
							<RowDefinition />
						</Grid.RowDefinitions>
						<Grid Background="#FF9E9D9D">
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="10" />
								<ColumnDefinition Width="90" />
								<ColumnDefinition MinWidth="450" />
								<ColumnDefinition Width="10" />
							</Grid.ColumnDefinitions>
							<Grid.RowDefinitions>
								<RowDefinition Height="34" />
								<RowDefinition Height="34" />
								<RowDefinition Height="34" />
								<RowDefinition Height="34" />
								<RowDefinition Height="34" />
								<RowDefinition Height="34" />
								<RowDefinition Height="34" />
								<RowDefinition Height="34" />
								<RowDefinition Height="34" />
								<RowDefinition Height="34" />
								<RowDefinition Height="34" />
							</Grid.RowDefinitions>

							<TextBlock Grid.Row="0"
									   VerticalAlignment="Center"
									   Grid.Column="1">
								<Run Text="Plugin key:" />
								<Run Text="*"
									 Foreground="Red" />
							</TextBlock>
							<TextBox x:Name="PART_PluginKeyTb"
									 Grid.Row="0"
									 Grid.Column="2" />

							<TextBlock Grid.Row="1"
									   VerticalAlignment="Center"
									   Grid.Column="1">
								<Run Text="Plugin name:" />
								<Run Text="*"
									 Foreground="Red" />
							</TextBlock>
							<TextBox x:Name="PART_PluginNameTb"
									 Grid.Row="1"
									 Grid.Column="2" />

							<TextBlock Grid.Row="2"
									   VerticalAlignment="Center"
									   Grid.Column="1">
								<Run Text="Author(s):" />
								<Run Text="*"
									 Foreground="Red" />
							</TextBlock>
							<TextBox x:Name="PART_PluginAuthorTb"
									 Grid.Row="2"
									 Grid.Column="2" />

							<TextBlock Text="Description:"
									   Grid.Row="3"
									   VerticalAlignment="Center"
									   Grid.Column="1" />
							<TextBox x:Name="PART_PluginDesTb"
									 Grid.Row="3"
									 Grid.Column="2" />


							<!--Version field-->
							<Rectangle Grid.Row="4"
									   Fill="#FFC5C5C5"
									   Grid.RowSpan="4"
									   Grid.ColumnSpan="5" />
							<TextBlock Grid.Row="4"
									   VerticalAlignment="Center"
									   Grid.Column="1">
								<Run Text="Version:" />
								<Run Text="*"
									 Foreground="Red" />
							</TextBlock>
							<ComboBox x:Name="PART_ListVersionCbx"
									  Grid.Row="4"
									  Margin="0,2"
									  Width="250"
									  HorizontalAlignment="Left"
									  VirtualizingPanel.CacheLength="1"
									  VirtualizingPanel.CacheLengthUnit="Pixel"
									  VirtualizingPanel.IsContainerVirtualizable="True"
									  VirtualizingPanel.IsVirtualizing="True"
									  VirtualizingPanel.VirtualizationMode="Recycling"
									  VirtualizingPanel.IsVirtualizingWhenGrouping="True"
									  BorderThickness="0"
									  VerticalContentAlignment="Center"
									  ItemsSource="{Binding ElementName=PART_MainWindow, Path=VersionSource}"
									  Grid.Column="2">
								<ComboBox.ItemContainerStyle>
									<Style TargetType="ComboBoxItem">
										<Setter Property="Template">
											<Setter.Value>
												<ControlTemplate TargetType="ComboBoxItem">
													<Border x:Name="BorderContainer"
															Background="#FFBDBDBD"
															BorderThickness="2"
															Margin="0,5"
															Padding="5">
														<Grid>
															<Button x:Name="SUB_DeleteVersionItem"
																	Content="X"
																	VerticalAlignment="Top"
																	Click="HandleAddPluginTabButtonEvent"
																	HorizontalAlignment="Right" />
															<TextBlock IsHitTestVisible="False">
													<Run Text="VERSION: "
																FontWeight="Bold" />
													<Run Text="{Binding Version}"
																Foreground="Green" />
													<LineBreak />
													<Run Text="DESCRIPTION: "
																FontWeight="Bold" />
													<Run Text="{Binding Description}"
																Foreground="Black" />
													<LineBreak />
													<Run Text="DATE PUBLISHED: "
																FontWeight="Bold" />
													<Run Text="{Binding DatePublished}"
																Foreground="Red" />
													<LineBreak />
													<Run Text="PATH: "
																FontWeight="Bold" />
													<Run Text="{Binding FilePath}"
																Foreground="Aqua" />
															</TextBlock>
														</Grid>

													</Border>
													<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver"
																 Value="True">
															<Setter Property="BorderBrush"
																	Value="Aqua"
																	TargetName="BorderContainer" />
														</Trigger>
														<Trigger Property="IsMouseOver"
																 Value="False">
															<Setter Property="BorderBrush"
																	Value="Transparent"
																	TargetName="BorderContainer" />
														</Trigger>
													</ControlTemplate.Triggers>
												</ControlTemplate>
											</Setter.Value>
										</Setter>
									</Style>
								</ComboBox.ItemContainerStyle>
								<ComboBox.ItemTemplate>
									<DataTemplate DataType="{x:Type pvivm:PluginVersionItemViewModel}">
										<Border BorderThickness="2"
												BorderBrush="Black"
												CornerRadius="2"
												VerticalAlignment="Center">
											<TextBlock>
										<Run Text="VERSION: "
												FontWeight="Bold" />
										<Run Text="{Binding Version}"
												FontWeight="Bold" />
											</TextBlock>
										</Border>
									</DataTemplate>
								</ComboBox.ItemTemplate>
							</ComboBox>
							<StackPanel Grid.Row="5"
										Orientation="Horizontal"
										Grid.Column="2"
										Margin="0,5">
								<TextBox x:Name="PART_PluginVersionTb"
										 Width="100"
										 Tag="Version"
										 Margin="0" />

								<TextBox x:Name="PART_PathToPluginTextbox"
										 Width="100"
										 Tag="File path"
										 Margin="10,0,0,0"
										 IsReadOnly="True" />

								<Button x:Name="PART_OpenPluginFileChooser"
										Content="..."
										Click="HandleAddPluginTabButtonEvent"
										Width="15"
										Margin="10,0,0,0"
										Height="20" />

								<TextBlock VerticalAlignment="Center"
										   Margin="10,0,0,0">
							<Run Text="Date publised:" />
							<Run Text="*"
									Foreground="Red" />
								</TextBlock>

								<DatePicker x:Name="PART_DatePublisedDP"
											Grid.Row="4"
											Width="120"
											HorizontalAlignment="Left"
											VerticalAlignment="Center"
											Grid.Column="2" />
							</StackPanel>
							<StackPanel Grid.Row="6"
										Grid.Column="2"
										Grid.RowSpan="2"
										Margin="0,5"
										Orientation="Horizontal">
								<TextBox x:Name="PART_VersionDesTb"
										 Width="300"
										 VerticalContentAlignment="Top"
										 TextWrapping="Wrap"
										 AcceptsReturn="True"
										 VerticalScrollBarVisibility="Auto"
										 Margin="0"
										 Tag="Version description" />
								<Button x:Name="PART_CreateNewVersionBtn"
										Content="Add version"
										Click="HandleAddPluginTabButtonEvent"
										Margin="10,0,0,0"
										Height="20" />
								<Button x:Name="PART_DeleteAllVersionBtn"
										Content="Clean all"
										Click="HandleAddPluginTabButtonEvent"
										Margin="10,0,0,0"
										Height="20" />
							</StackPanel>


							<!--Project URL field-->
							<TextBlock Grid.Row="8"
									   VerticalAlignment="Center"
									   Grid.Column="1">
								<Run Text="Project URL:" />
								<Run Text="*"
									 Foreground="Red" />
							</TextBlock>
							<TextBox x:Name="PART_PluginURLTb"
									 Grid.Row="8"
									 Grid.Column="2" />

							<TextBlock Text="Icon source:"
									   Grid.Row="9"
									   VerticalAlignment="Center"
									   Grid.Column="1" />
							<TextBox x:Name="PART_PluginIconSourceTb"
									 Grid.Row="9"
									 Grid.Column="2" />

							<TextBlock Text="Authenticated:"
									   Grid.Row="10"
									   VerticalAlignment="Center"
									   Grid.Column="1" />
							<CheckBox x:Name="PART_PluginIsAuthenticatedCb"
									  Grid.Row="10"
									  Grid.Column="2"
									  VerticalAlignment="Center" />
						</Grid>

						<WrapPanel Grid.Row="1">
							<Button x:Name="PART_AddPluginToDb"
									Click="HandleAddPluginTabButtonEvent"
									Content="Add"
									Width="70"
									Margin="5" />
							<Button x:Name="PART_ClearAddPluginTab"
									Content="Clear"
									Width="70"
									Margin="5" />
						</WrapPanel>
					</Grid>

				</ScrollViewer>

			</TabItem>
		</TabControl>

		<StackPanel Orientation="Horizontal"
					Grid.Row="1"
					Margin="0,0,10,0"
					HorizontalAlignment="Right">
			<Path Fill="Black"
				  Stretch="Uniform"
				  Height="14"
				  x:Name="PART_WaitingIconPath"
				  RenderTransformOrigin="0.5,0.5"
				  Data="m -71.045951,-81.672473 c -10.3121,-0.500058 -20.341549,-3.639115 -29.259149,-9.157661 -5.79228,-3.584482 -11.27341,-8.460257 -15.59325,-13.871106 -6.93713,-8.68915 -11.37724,-19.06407 -12.84469,-30.01341 -0.46012,-3.4332 -0.67518,-7.9359 -0.4427,-9.26902 0.80024,-4.58893 6.05634,-6.85539 9.92642,-4.28032 1.44318,0.96026 2.44919,2.47171 2.77376,4.16738 0.0507,0.26471 0.1135,1.28964 0.15028,2.45136 0.0803,2.53466 0.21055,4.0156 0.54335,6.17633 1.19845,7.78089 4.32171,15.18764 9.07785,21.52795 7.96639,10.6198 19.841569,17.497164 32.933929,19.073274 3.63357,0.437423 7.87054,0.438089 11.43966,0.0018 8.433028,-1.030865 16.416448,-4.24924 23.226478,-9.363334 1.89533,-1.42333 3.1764,-2.52689 4.92427,-4.24198 1.1227,-1.10164 2.83806,-2.9364 2.83581,-3.0332 -6.3e-4,-0.0264 -2.36355,-1.34916 -5.25098,-2.9394 -2.88743,-1.59024 -5.35569,-2.98019 -5.48501,-3.08878 -0.75307,-0.63232 -0.84798,-1.87967 -0.19912,-2.61681 0.13995,-0.159 0.34557,-0.34527 0.45692,-0.41394 0.11135,-0.0687 5.93015,-1.80788 12.930656,-3.86492 7.00051,-2.05704 15.04511,-4.42101 17.87688,-5.25328 5.4995704,-1.61634 5.5340804,-1.62428 6.1506004,-1.41421 0.40043,0.13644 0.82154,0.52635 1.03255,0.95606 0.36414,0.74153 0.7703,-0.78813 -5.02709,18.93293 -2.8607804,9.73157 -5.2613104,17.826003 -5.3345004,17.987623 -0.42348,0.935086 -1.60119,1.360472 -2.52084,0.910535 -0.19666,-0.09622 -0.45022,-0.283465 -0.56346,-0.416109 -0.11324,-0.132643 -1.29487,-2.213959 -2.62583,-4.625146 -1.33096,-2.411186 -2.44821,-4.420103 -2.48278,-4.464263 -0.0472,-0.0602 -0.31637,0.19074 -1.07825,1.0052 -3.88104,4.148919 -8.916786,8.101897 -14.095136,11.064412 -10.22875,5.851843 -21.787238,8.638879 -33.476628,8.072037 z m 1.1314,-41.108267 c -0.34571,-0.0298 -1.06697,-0.12725 -1.60281,-0.21657 -8.37542,-1.39605 -15.13671,-7.62754 -17.21772,-15.86857 -0.4702,-1.86202 -0.67127,-3.77984 -0.6126,-5.84277 0.0418,-1.46916 0.13591,-2.30367 0.4183,-3.70846 1.28986,-6.41668 5.63342,-11.99539 11.5979,-14.89593 3.12706,-1.5207 6.40965,-2.21832 9.96257,-2.11727 1.98762,0.0565 3.52139,0.29366 5.37413,0.83088 6.266308,1.81699 11.436518,6.51739 13.858918,12.59957 2.46673,6.19351 1.88535,13.2974 -1.55095,18.95087 -3.58993,5.90626 -9.687018,9.69857 -16.519278,10.27479 -0.88196,0.0744 -2.80897,0.071 -3.70846,-0.007 z m 55.750114,-16.10607 c -2.37104,-0.38936 -4.36439,-2.07034 -5.12234,-4.31966 -0.24837,-0.73705 -0.30831,-1.26879 -0.37297,-3.30847 -0.0683,-2.1562 -0.17277,-3.48896 -0.41288,-5.26976 -2.5153,-18.65551 -15.839656,-34.2893 -33.903126,-39.77937 -3.265028,-0.99234 -6.513098,-1.60636 -10.218968,-1.93179 -1.27436,-0.11191 -6.33616,-0.11227 -7.57406,-5.1e-4 -5.93072,0.53531 -11.23469,1.94967 -16.53095,4.40815 -4.040079,1.87538 -8.110589,4.5436 -11.59681,7.60172 -1.325689,1.1629 -4.748669,4.65294 -4.744689,4.83765 5e-4,0.0226 2.36384,1.34226 5.251899,2.9325 2.888061,1.59024 5.356421,2.98019 5.485241,3.08879 0.75233,0.63417 0.8467,1.88007 0.1982,2.61681 -0.13995,0.15899 -0.34742,0.34653 -0.46104,0.41675 -0.11362,0.0702 -5.013161,1.54029 -10.88786,3.26681 -5.87472,1.7265 -13.87749,4.07998 -17.78395,5.22994 -7.5933,2.23526 -7.63737,2.24616 -8.25523,2.04094 -0.65919,-0.21895 -1.18433,-0.91389 -1.2467,-1.64981 -0.0289,-0.34129 0.30799,-1.51919 5.19233,-18.15302 2.87279,-9.78343 5.28316,-17.92029 5.35638,-18.08192 0.17085,-0.37712 0.56537,-0.762 0.96459,-0.94101 0.68599,-0.3076 1.64965,-0.10445 2.1197,0.44686 0.11327,0.13285 1.29492,2.21417 2.62588,4.62516 1.33096,2.411 2.44821,4.42104 2.48278,4.46677 0.048,0.0635 0.24889,-0.11858 0.84855,-0.76883 0.94739,-1.02732 2.35857,-2.41049 3.62379,-3.55186 9.727759,-8.77551 21.965469,-14.23081 34.937959,-15.57456 2.26358,-0.23447 3.40609,-0.28704 6.22267,-0.28632 3.87662,9.8e-4 6.44802,0.20389 9.994,0.78862 19.528908,3.22034 36.427944,15.86705 45.135794,33.77818 3.8477704,7.91448 5.9185304,16.51286 6.1008004,25.33231 0.0405,1.96076 -0.009,2.52014 -0.29872,3.38251 -0.69802,2.07675 -2.4337,3.6889 -4.5478204,4.22415 -0.77637,0.19656 -1.85464,0.25179 -2.58245,0.13227 z">
				<Path.Resources>
					<Storyboard x:Key="Spin">
						<DoubleAnimation Storyboard.TargetName="TaskHandlingIconTransform"
										 Storyboard.TargetProperty="(RotateTransform.Angle)"
										 From="360"
										 To="0"
										 Duration="0:0:1"
										 RepeatBehavior="Forever" />
					</Storyboard>
				</Path.Resources>
				<Path.RenderTransform>
					<RotateTransform x:Name="TaskHandlingIconTransform"
									 Angle="360" />
				</Path.RenderTransform>
				<Path.Triggers>
					<EventTrigger RoutedEvent="Path.Loaded">
						<BeginStoryboard Storyboard="{StaticResource Spin}">
						</BeginStoryboard>
					</EventTrigger>
				</Path.Triggers>
			</Path>

			<TextBlock x:Name="PART_CurrentTaskNameTb"
					   VerticalAlignment="Center"
					   FontSize="8"
					   Margin="5,0,0,0">

			</TextBlock>
		</StackPanel>
	</Grid>

</Window>
